<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>User Information</title>
  <link rel="stylesheet" href="/css/style2.css">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script>
    $(document).ready(function() {
      // AJAX 요청 설정
      $.ajax({
        url: '/mypage/user_detail',
        type: 'GET',
        beforeSend: function myFunction(xhr) {
          const token = localStorage.getItem('X-AUTH-TOKEN'); // localStorage에서 토큰을 가져옴
          xhr.setRequestHeader("X-AUTH-TOKEN", token);
        },
        success: function (data, status, xhr) {
          console.log('Success: ' + data);
          document.getElementById('name').innerText = data.name;
          document.getElementById('id').innerText = data.uid;
          document.getElementById('role').innerText = data.roles;
        },
        error: function (jqXHR, textStatus, errorThrown) {
          console.log('Error: ' + errorThrown);
        }
      });

      // 판매 목록 조회 버튼 클릭 시 이벤트 핸들러
      $('#sales-btn').on('click', function() {
        window.location.href = '/mypage/sales'; // 판매 목록 페이지로 이동
      });
    });

  </script>
  <link rel="icon" href="data:,">
</head>

<body>
<div class="container">
  <h1>User Information</h1>
  <p>Name: <span id="name"></span></p>
  <p>ID: <span id="id"></span></p>
  <p>Role: <span id="role"></span></p>
  <button id="sales-btn">판매 목록 조회</button>
</div>
</body>
</html>
